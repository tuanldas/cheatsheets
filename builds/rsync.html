<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-03-06T16:31:39.02775"><title>Rsync | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"rsync-l-g","level":0,"title":"Rsync là gì ?","anchor":"#rsync-l-g"},{"id":"c-i-t","level":0,"title":"Cài đặt","anchor":"#c-i-t"},{"id":"command","level":0,"title":"Command","anchor":"#command"},{"id":"c-c-opction-c-b-n","level":0,"title":"Các opction cơ bản","anchor":"#c-c-opction-c-b-n"},{"id":"1-copy-file-v-th-m-c-trong-local","level":0,"title":"1. Copy file và thư mục trong local","anchor":"#1-copy-file-v-th-m-c-trong-local"},{"id":"2-copy-tr-n-server-qua-ssh","level":0,"title":"2. Copy trên server qua ssh","anchor":"#2-copy-tr-n-server-qua-ssh"},{"id":"3-hi-n-th-ti-n-tr-nh-trong-khi-transfer-d-li-u-v-i-rsync","level":0,"title":"3. Hiển thị tiến trình trong khi transfer dữ liệu với rsync","anchor":"#3-hi-n-th-ti-n-tr-nh-trong-khi-transfer-d-li-u-v-i-rsync"},{"id":"4-s-d-ng-t-y-ch-n-include-v-exclude","level":0,"title":"4. Sử dụng tùy chọn –include và –exclude","anchor":"#4-s-d-ng-t-y-ch-n-include-v-exclude"},{"id":"5-ch-y-th-nghi-m-rsync","level":0,"title":"5. Chạy thử nghiệm Rsync","anchor":"#5-ch-y-th-nghi-m-rsync"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Rsync | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="rsync.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Rsync | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "rsync.html#webpage",
    "url": "rsync.html",
    "name": "Rsync | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "/#website",
    "url": "/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="Rsync" data-main-title="Rsync" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Rsync" id="Rsync.md">Rsync</h1><section class="chapter"><h2 id="rsync-l-g" data-toc="rsync-l-g">Rsync l&agrave; g&igrave; ?</h2><p id="4ffa5ed9_134">Rsync (Remote Sync) l&agrave; một c&ocirc;ng cụ d&ugrave;ng để sao ch&eacute;p v&agrave; đồng bộ file/thư mục được d&ugrave;ng rất phổ biến. Với sự trợ gi&uacute;p của rsync, bạn c&oacute; thể đồng bộ dữ liệu tr&ecirc;n local hoặc giữa c&aacute;c server với nhau một c&aacute;ch dễ d&agrave;ng.</p></section><section class="chapter"><h2 id="c-i-t" data-toc="c-i-t">C&agrave;i đặt</h2><p id="4ffa5ed9_135">Sử dụng đặt tr&ecirc;n ubuntu</p><div class="code-block" data-lang="bash" data-prompt="$">
apt-get install rsysnc
</div></section><section class="chapter"><h2 id="command" data-toc="command">Command</h2><div class="code-block" data-lang="bash" data-prompt="$">
rsync options source destination
</div><p id="4ffa5ed9_138">Trong đ&oacute;:</p><ul class="list _ul" id="4ffa5ed9_139"><li class="list__item" id="4ffa5ed9_140"><p>Source: dữ liệu nguồn</p></li><li class="list__item" id="4ffa5ed9_141"><p>Destination: dữ liệu đ&iacute;ch</p></li><li class="list__item" id="4ffa5ed9_142"><p>Options: một số t&ugrave;y chọn th&ecirc;m</p></li></ul></section><section class="chapter"><h2 id="c-c-opction-c-b-n" data-toc="c-c-opction-c-b-n">C&aacute;c opction cơ bản</h2><div class="table-wrapper"><table class="wide" id="4ffa5ed9_143"><thead><tr class="ijRowHead" id="4ffa5ed9_144"><th id="4ffa5ed9_145"><p>Opctions</p></th><th id="4ffa5ed9_146"><p>M&ocirc; tả</p></th></tr></thead><tbody><tr id="4ffa5ed9_147"><td id="4ffa5ed9_148"><p><code class="code" id="4ffa5ed9_149">-v</code></p></td><td id="4ffa5ed9_150"><p>Hiển thị trạng th&aacute;i kết quả.</p></td></tr><tr id="4ffa5ed9_151"><td id="4ffa5ed9_152"><p><code class="code" id="4ffa5ed9_153">-r</code></p></td><td id="4ffa5ed9_154"><p>Copy mọi thứ từ thư mục gốc v&agrave; thư mục con (đệ quy), nhưng kh&ocirc;ng đảm bảo t&iacute;nh to&agrave;n vẹn th&ocirc;ng số của file v&agrave; thư mục.</p></td></tr><tr id="4ffa5ed9_155"><td id="4ffa5ed9_156"><p><code class="code" id="4ffa5ed9_157">-a</code></p></td><td id="4ffa5ed9_158"><p>Copy mọi thứ từ thư mục gốc v&agrave; thư mục con (đệ quy), nhưng đảm bảo t&iacute;nh to&agrave;n vẹn th&ocirc;ng số của file v&agrave; thư mục.</p></td></tr><tr id="4ffa5ed9_159"><td id="4ffa5ed9_160"><p><code class="code" id="4ffa5ed9_161">-z</code></p></td><td id="4ffa5ed9_162"><p>N&eacute;n dữ liệu trong khi transfer, việc n&agrave;y c&oacute; thể tiết kiệm băng th&ocirc;ng nhưng sẽ tốn th&ecirc;m thời gian.</p></td></tr><tr id="4ffa5ed9_163"><td id="4ffa5ed9_164"><p><code class="code" id="4ffa5ed9_165">-h</code></p></td><td id="4ffa5ed9_166"><p>Human-readable, output kết quả dễ đọc.</p></td></tr><tr id="4ffa5ed9_167"><td id="4ffa5ed9_168"><p><code class="code" id="4ffa5ed9_169">--delete</code></p></td><td id="4ffa5ed9_170"><p>X&oacute;a dữ liệu ở destination nếu như source kh&ocirc;ng c&ograve;n dữ liệu đ&oacute;.</p></td></tr><tr id="4ffa5ed9_171"><td id="4ffa5ed9_172"><p><code class="code" id="4ffa5ed9_173">--exclude</code></p></td><td id="4ffa5ed9_174"><p>Loại trừ một file hoặc folder được chỉ định ra khỏi qu&aacute; tr&igrave;nh đồng bộ. Mỗi file hoặc folder cần loại bỏ sẽ được đi k&egrave;m với một opction <code class="code" id="4ffa5ed9_175">exclude</code></p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="1-copy-file-v-th-m-c-trong-local" data-toc="1-copy-file-v-th-m-c-trong-local">1. Copy file v&agrave; thư mục trong local</h2><section class="chapter"><h3 id="copy-tr-n-local" data-toc="copy-tr-n-local">Copy tr&ecirc;n local</h3><div class="code-block" data-lang="bash" data-prompt="$">
rsync -zvh backup.tar /tmp/backups/
</div><p id="4ffa5ed9_178">Nếu thư mục tr&ecirc;n m&aacute;y chưa c&oacute; th&igrave; sẽ được tạo mới trước khi copy.</p></section></section><section class="chapter"><h2 id="2-copy-tr-n-server-qua-ssh" data-toc="2-copy-tr-n-server-qua-ssh">2. Copy tr&ecirc;n server qua ssh</h2><section class="chapter"><h3 id="copy-t-server-remote-v-local" data-toc="copy-t-server-remote-v-local">Copy từ server remote về local</h3><p id="4ffa5ed9_180">Để sử dụng giao thức <code class="code" id="4ffa5ed9_181">ssh</code> th&igrave; bạn cần th&ecirc;m opction <code class="code" id="4ffa5ed9_182">-e</code>.</p><div class="code-block" data-lang="bash" data-prompt="$">
rsync -avzhe ssh root@192.168.0.35:/root/install.log /tmp/
</div></section><section class="chapter"><h3 id="copy-t-local-l-n-server-remote" data-toc="copy-t-local-l-n-server-remote">Copy từ local l&ecirc;n server remote</h3><div class="code-block" data-lang="bash" data-prompt="$">
rsync -avzhe ssh backup.tar root@192.168.0.100:/backups/
</div><aside class="prompt" data-type="tip" data-title="" id="4ffa5ed9_185"><p id="4ffa5ed9_186">Server sử dụng port kh&aacute;c 22:</p><p id="4ffa5ed9_187"><code class="code" id="4ffa5ed9_188">rsync -avzhe &quot;ssh -p 2222&quot; ...</code></p></aside></section></section><section class="chapter"><h2 id="3-hi-n-th-ti-n-tr-nh-trong-khi-transfer-d-li-u-v-i-rsync" data-toc="3-hi-n-th-ti-n-tr-nh-trong-khi-transfer-d-li-u-v-i-rsync">3. Hiển thị tiến tr&igrave;nh trong khi transfer dữ liệu với rsync</h2><p id="4ffa5ed9_190">Sử dụng t&ugrave;y chọn <code class="code" id="4ffa5ed9_191">--progress</code> để hiển thị tiến tr&igrave;nh</p><div class="code-block" data-lang="bash" data-prompt="$">
rsync -avzhe ssh --progress /home/rpmpkgs root@192.168.0.100:/root/rpmpkgs
</div></section><section class="chapter"><h2 id="4-s-d-ng-t-y-ch-n-include-v-exclude" data-toc="4-s-d-ng-t-y-ch-n-include-v-exclude">4. Sử dụng t&ugrave;y chọn &ndash;include v&agrave; &ndash;exclude</h2><p id="4ffa5ed9_194">Hai t&ugrave;y chọn gi&uacute;p ch&uacute;ng ta c&oacute; thể th&ecirc;m hoặc bớt file khi đồng bộ</p><div class="code-block" data-lang="bash" data-prompt="$">
rsync -avze ssh --include 'R*' --exclude '*' root@192.168.0.101:/var/lib/rpm/ /root/rpm
</div></section><section class="chapter"><h2 id="5-ch-y-th-nghi-m-rsync" data-toc="5-ch-y-th-nghi-m-rsync">5. Chạy thử nghiệm Rsync</h2><p id="4ffa5ed9_196">Nếu bạn kh&ocirc;ng chắc c&acirc;u lệnh c&oacute; thực hiện ch&iacute;nh x&aacute;c những g&igrave; mong muốn hay kh&ocirc;ng, h&atilde;y th&ecirc;m t&ugrave;y chọn --dry-run. <br> Rsync l&uacute;c n&agrave;y sẽ kh&ocirc;ng thay đổi g&igrave; dữ liệu cả m&agrave; chỉ show output m&agrave; th&ocirc;i. Nếu mọi thứ hoạt động ổn, h&atilde;y bỏ t&ugrave;y chọn --dry-run ra khỏi c&acirc;u lệnh.</p><div class="code-block" data-lang="bash" data-prompt="$">
rsync --dry-run --remove-source-files -zvh backup.tar /tmp/backups/
</div></section><div class="last-modified">Last modified: 06 March 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="homebrew.html" class="navigation-links__prev">Homebrew</a><a href="docker.html" class="navigation-links__next">Docker</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>